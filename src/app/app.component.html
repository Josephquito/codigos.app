<!-- NAV WRAP (hide/show on scroll) -->
<header
  class="nav-wrap"
  [class.nav-wrap--visible]="navVisible"
  [class.nav-wrap--hidden]="!navVisible"
>
  <div class="navbar bg-base-100 shadow-sm px-4">
    <div class="flex-1">
      <a routerLink="/" class="btn btn-ghost text-xl">JOTAVIX</a>
    </div>

    <!-- DESKTOP -->
    <div class="hidden lg:flex items-center gap-3">
      <!-- Ver correo -->
      <a
        *ngIf="!isLoggedIn; else correoPrivadoDesktop"
        routerLink="/correo"
        class="menu-link"
        routerLinkActive="active"
        >Ver Correo</a
      >
      <ng-template #correoPrivadoDesktop>
        <a
          routerLink="/correo-privado"
          class="menu-link"
          routerLinkActive="active"
          >Ver Correo</a
        >
      </ng-template>

      <ng-container *ngIf="isLoggedIn; else loginBtnDesktop">
        <a routerLink="/registrar" class="menu-link" routerLinkActive="active"
          >Gmail</a
        >
        <a
          routerLink="/imap-registrar"
          class="menu-link"
          routerLinkActive="active"
          >Dominio</a
        >
        <a routerLink="/cuentas" class="menu-link" routerLinkActive="active"
          >Mis cuentas</a
        >

        <a
          *ngIf="isAdmin"
          routerLink="/users"
          class="menu-link"
          routerLinkActive="active"
          >Usuarios</a
        >

        <a (click)="logout()" class="menu-logout">Cerrar sesión</a>
      </ng-container>

      <ng-template #loginBtnDesktop>
        <a routerLink="/login" class="menu-link" routerLinkActive="active"
          >Acceder</a
        >
      </ng-template>
    </div>

    <!-- MOBILE: hamburger -->
    <div class="lg:hidden">
      <button
        type="button"
        class="btn btn-ghost btn-circle hamburger"
        aria-label="Abrir menú"
        [attr.aria-expanded]="mobileOpen ? 'true' : 'false'"
        (click)="toggleMobileMenu($event)"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="h-5 w-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>
    </div>
  </div>
</header>

<!-- OVERLAY -->
<div
  class="mobile-overlay"
  [class.open]="mobileOpen"
  (click)="closeMobileMenu()"
></div>

<!-- MOBILE PANEL -->
<nav #mobileMenu class="mobile-panel" [class.open]="mobileOpen">
  <!-- Ver correo -->
  <a
    *ngIf="!isLoggedIn; else correoPrivadoMobile"
    class="mobile-link"
    routerLink="/correo"
    (click)="closeMobileMenu()"
    >Ver Correo</a
  >
  <ng-template #correoPrivadoMobile>
    <a
      class="mobile-link"
      routerLink="/correo-privado"
      (click)="closeMobileMenu()"
      >Ver Correo</a
    >
  </ng-template>

  <ng-container *ngIf="isLoggedIn; else loginLinkMobile">
    <a class="mobile-link" routerLink="/registrar" (click)="closeMobileMenu()"
      >Gmail</a
    >
    <a
      class="mobile-link"
      routerLink="/imap-registrar"
      (click)="closeMobileMenu()"
      >Dominio</a
    >
    <a class="mobile-link" routerLink="/cuentas" (click)="closeMobileMenu()"
      >Mis cuentas</a
    >

    <a
      *ngIf="isAdmin"
      class="mobile-link"
      routerLink="/users"
      (click)="closeMobileMenu()"
      >Usuarios</a
    >

    <button class="mobile-link mobile-logout" (click)="logout()">
      Cerrar sesión
    </button>
  </ng-container>

  <ng-template #loginLinkMobile>
    <a class="mobile-link" routerLink="/login" (click)="closeMobileMenu()"
      >Acceder</a
    >
  </ng-template>
</nav>

<!-- CONTENIDO -->
<router-outlet></router-outlet>
