<!-- Navbar -->
<div class="navbar bg-base-100 shadow-sm">
  <div class="flex-1">
    <a routerLink="/" class="btn btn-ghost text-xl">JOTAVIX</a>
  </div>

  <!-- Versión móvil -->
  <div class="flex-none lg:hidden" (click)="$event.stopPropagation()">
    <div class="dropdown dropdown-end" [class.dropdown-open]="isMenuOpen">
      <!-- Trigger -->
      <button
        type="button"
        class="btn btn-ghost btn-circle"
        aria-label="Abrir menú"
        [attr.aria-expanded]="isMenuOpen ? 'true' : 'false'"
        (click)="toggleMenu($event)"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
          class="h-5 w-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          />
        </svg>
      </button>

      <!-- Menú -->
      <ul
        class="menu menu-sm dropdown-content mt-3 z-[9999] p-2 shadow bg-base-100 rounded-box w-52"
        (click)="$event.stopPropagation()"
        role="menu"
      >
        <!-- Ver correo -->
        <li *ngIf="!isLoggedIn; else correoPrivadoMobile">
          <a routerLink="/correo" role="menuitem">Ver Correo</a>
        </li>
        <ng-template #correoPrivadoMobile>
          <li>
            <a routerLink="/correo-privado" role="menuitem">Ver Correo</a>
          </li>
        </ng-template>

        <ng-container *ngIf="isLoggedIn; else loginLink">
          <li>
            <a routerLink="/registrar" role="menuitem">Gmail</a>
          </li>
          <li>
            <a routerLink="/imap-registrar" role="menuitem">Dominio</a>
          </li>
          <li><a routerLink="/cuentas" role="menuitem">Mis cuentas</a></li>

          <!-- SOLO ADMIN -->
          <li *ngIf="isAdmin">
            <a routerLink="/users" role="menuitem">Usuarios</a>
          </li>

          <li>
            <button (click)="logout()" class="text-red-500" role="menuitem">
              Cerrar sesión
            </button>
          </li>
        </ng-container>

        <ng-template #loginLink>
          <li><a routerLink="/login" role="menuitem">Acceder</a></li>
        </ng-template>
      </ul>
    </div>
  </div>

  <!-- Versión escritorio -->
  <div class="flex-none hidden lg:flex">
    <ul class="menu menu-horizontal px-1">
      <!-- Ver correo -->
      <li *ngIf="!isLoggedIn; else correoPrivadoDesktop">
        <a routerLink="/correo">Ver Correo</a>
      </li>
      <ng-template #correoPrivadoDesktop>
        <li><a routerLink="/correo-privado">Ver Correo</a></li>
      </ng-template>

      <ng-container *ngIf="isLoggedIn; else loginBtn">
        <li><a routerLink="/registrar">Gmail</a></li>
        <li><a routerLink="/imap-registrar">Dominio</a></li>
        <li><a routerLink="/cuentas">Mis cuentas</a></li>

        <!-- SOLO ADMIN -->
        <li *ngIf="isAdmin"><a routerLink="/users">Usuarios</a></li>

        <li>
          <button
            (click)="logout()"
            class="btn btn-error btn-sm text-white ml-2"
          >
            Cerrar sesión
          </button>
        </li>
      </ng-container>

      <ng-template #loginBtn>
        <li><a routerLink="/login">Acceder</a></li>
      </ng-template>
    </ul>
  </div>
</div>

<!-- Aquí irá tu contenido -->
<router-outlet></router-outlet>
